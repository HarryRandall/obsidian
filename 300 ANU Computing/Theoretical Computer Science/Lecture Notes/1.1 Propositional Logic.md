**Class**: [[COMP1600 - Theoretical Computer Science]]
**Date**: Monday , 21 July 2025, 20:02
**Tags**: #dafny #propositional_logic

---
#### Lecture 1
##### Verification
Programs have bugs. We need a way of ensuring that a program is correct according to its **specification**.
- Why is this important?
	- Think of safety-critical systems, e.g., cars, airplanes.
	- Financial systems
	- Energy systems
- What problems could it cause?
- Danger to people.
- Financial loss.
- Loss of critical infrastructure
###### Example 1
- The Ariane 5 rocket.
- It exploded due to a software bug.
###### Example 2
- The DAO was a decentralised autonomous organisation (DAO) that was launched in 2016 on the Ethereum blockchain. After raising $150 million USD worth of ETH through a token sale, the DAO was hacked due to vulnerabilities in its code base.
- Ethereum now uses Hoare-style logic to prevent this happening again.
###### Example 3
- The Needham Schroeder Public Key Protocol
- This protocol was in use for 17 years before a flaw was found using formal methods.
- The flaw was a security risk - an attacker could get access to another user's encrypted information.
- A formal verification approach called model checking was used to find the flaw.

> **Why don't we just test a program?**
- Testing explores some paths, but not all the paths.
- Verification proves that a program is correct for all paths.

---
#### Lecture 2
- A **proposition** is a statement that is either **true** or **false**.
	- The sky is blue.
	- The sun is hot.
	- Canberra is in Australia.
	- Australia is in the Norther Hemisphere.
	- Kryptonite does not affect Clark Kent.

##### Logical Connectives
1. $\neg$ **Not**
	1. Let $p$ be "It is raining now".
	2. Then, $\neg p$ means "It is not raining now".
	3. Negation makes it have the opposite truth value. If $p$ is true, then $\neg p$ is false, and if $p$ is false, then $\neg p$ is true.
2. $\land$ **And** or **Conjunction**
	1. Let $p$ be "My hat is green" and $q$ be "My scarf is yellow".
	2. Then, $p \land q$ means "My hat is green **and** my scarf is yellow".
3. $\vee$ **Or**
	1. Let $p$ be "I will play tennis today" and $q$ be "I will watch a movie today".
	2. Then, $p \vee q$ means "I will play tennis today **or** I will watch a movie today".
4. $\implies$ **Implies**
	1. Let $p$ be "It is raining today". and $q$ be "I will stay at home".
	2. Then, $p \implies q$ means "If it is raining today, then I will stay at home". 
5. $\iff$ **If and Only If**
	1. $p \implies q$ direction: If I can swim, then I can get to the island
	2. There could be other ways to get to the island (i.e., by plane).
	3. $q \implies q$ direction: I can get to the island only if I can swim (the only way to get to the island is to swim)

##### Precedence of Operations
- Suppose that we had this formula
$$p \land q \vee r$$
- What does this mean? Which of the following does it mean?
$$(p \land q) \vee r$$
$$p \land (q \vee r)$$
- By default, if there are no parenthesis, $\land$ binds strong than $\vee$, therefore it would be:
$$(p \land q) \vee r$$
- This is the general order of precedence of the other operators
$$ \neg \succ \land \succ \vee \succ \implies$$

**Precedence Finder Algorithm**:
1. Find the lowest precedence operators $x$ in the formula
$$ e = ... x ... x ... x$$
2. If $x$ is binary, read $e$ as follows:
$$e = (...) x ((...) x (...) x)$$
- If $x$ is unary (only $\neg$), read $e$ as follows:
$$e = \neg (... (\neg ...) ...)$$
1. Repeat Steps 1-2 recursively for the content inside the parentheses.

Example: What does the following formula mean?
$$p \vee q \land r \implies s \implies t$$
Step:
1. $p \vee q \land r \implies (s \implies t)$ ($\implies$ is lowest precedent)
2. $(p \vee q) \land r \implies (s \implies t)$  ($\vee$ is the next lowest precedent)
3.  $(p \vee (q \land r)) \implies (s \implies t)$  ($\land$ is the next lowest precedent)

- Given that $p \implies q$, then:
	- The **converse** is $q \implies p$
	- The **inverse** is $\neg p \implies \neg q$
- If I can swim, then I can get to the island
	- **Converse**: If I can get to the island, I can swim.
	- **Inverse**: If I can't swim, I can't get to the island.
- The **converse** and **inverse** are logically equivalent to each other.

#### Lecture 3

Show that the following is a tautology $(p \implies q ) \iff (\neg q \implies \neg p)$

| p   | q   | $\neg p$ | $\neg q$ | $p \implies q$ | $\neg q \implies \neg p$ | $(p \implies q ) \iff (\neg q \implies \neg p)$ |
| --- | --- | -------- | -------- | -------------- | ------------------------ | ----------------------------------------------- |
| T   | T   | F        | F        | T              | T                        | T                                               |
| T   | F   | F        | T        | F              | F                        | T                                               |
| F   | T   | T        | F        | T              | T                        | T                                               |
| F   | F   | T        | T        | T              | T                        | T                                               |
**Logic Puzzel**
Suppose that you have been given the following clues about a treasure. Where is the treasure?
- If this house is next to a lake, then the treasure is not in the kitchen.
- If the tree in the front yard is an elm, then the treasure is in the kitchen.
- This house is next to a lake.
- The tree is in the front yard is an elm, or the treasure is buried under the flagpole.
- If the tree in the back yard is an oak, then the treasure is in the garage.

Going through the steps methodologically and assigning values, we have.
1. If Lake (House is next to lake) implies not kitchen (the treasure is not in the kitchen) $Lake \implies \neg Kitchen$
2. If Elm implies kitchen (the treasure is in the kitchen) $Elm \implies Kitchen$
3. Lake (the house is next to a lake, this is true) $lake$
4. If Elm (if the tree is an elm) OR flagpole (the treasure is under the flagpole) $Elm \land flagpole$
5. If Oak (if the tree is an oak tree) implies garage (the treasure is in the garage) $oak \implies garage$

Which looks like this in Dafny:
```c
lemma treasure(lake:bool, kitchen:bool, elm:bool, flagpole:bool, oak:bool, garage:bool)
    requires (lake ==> ! kitchen)
    requires (elm ==> kitchen)
    requires(lake)
    requires (elm || flagpole)
    requires(oak ==> garage)
    {
    }
```



#### Rules
##### Modus Ponens (MP)
If $P \implies Q$ (If $P$, then $Q$) and $P$ is true, then $Q$ is true.
- E.G., If I study, I pass. I study, therefore, I pass.
##### Modus Tollens (MT)
If $P \implies Q$ and $\neg Q$ (Not Q) is True, then $\neg P$ (not P) is True.
- E.G., If I study, I pass. I didn't pass, therefore I didn't study.
##### Hypothetical Syllogism (HS)
If $P \implies Q$ and $Q \implies R$, then $P \implies R$
- E.G., If I study, I pass. If I pass, I graduate. Therefore, if I study, I graduate.
##### Disjunctive Syllogism (DS)
If $P \land Q$ ($P$ or $Q$) and $\neg P$ (not $P$), then $Q$.
- E.G., I'll go to the park or the mall. I'm not going to the mall. Therefore, I'm going to the mall.
